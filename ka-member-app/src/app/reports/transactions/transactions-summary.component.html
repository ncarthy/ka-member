<div class="row justify-content-center">
  <div class="card mt-4 col-sm-9">
    <div class="card-header row justify-content-between">
      <div class="col-sm">
        <form [formGroup]="form">
          <div class="row">
            <div>
              <h4>Recent Payments For</h4>
            </div>
            <div class="ml-4">
              <select
                class="form-control"
                #selectList
                (change)="onDateRangeChanged(selectList.value)"
                formControlName="dateRange"
              >
                <option disabled selected [ngValue]="null">-- select --</option>
                <option
                  *ngFor="let dtRng of DateRange | keyvalue: originalOrder"
                  value="{{ dtRng.value }}"
                >
                  {{ dtRng.value }}
                </option>
              </select>
            </div>
            <div class="ml-4">
              <select
                class="form-control"
                #selectList
                (change)="onDateRangeChanged(selectList.value)"
                formControlName="bank"
              >
                <option selected [ngValue]="null">Any</option>
                <option
                  *ngFor="let bank of bankAccounts"
                  value="{{ bank.id }}"
                >
                  {{ bank.name }}
                </option>
              </select>
            </div>
          </div>
          <div *ngIf="false">
            <p>Form Value: {{ form.value | json }}</p>
          </div>
        </form>
      </div>
      <div>
        <button routerLink="/reports" class="btn btn-outline-dark">
          Close &times;
        </button>
      </div>
    </div>
    <div class="card-body">
      <div *ngIf="!summary" class="spinner-border spinner-border-sm"></div>
      <table class="table table-striped table-responsive w-auto">
        <thead>
          <tr>
            <th>Month</th>
            <th>Bank</th>
            <th>Count</th>
            <th>Sum</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of summary">
            <th>
              <span class="text-dark">{{ item.index }}</span>
            </th>
            <td class="text-center">
              {{ bankAccounts[item.bankID - 1].name }}
            </td>
            <td class="text-center d-none d-sm-table-cell">
              {{ item.count }}
            </td>
            <td class="text-center">{{ item.sum }}</td>
          </tr>
          <tr>
            <td>Total</td>
            <td class="text-center">
              <strong>{{ count }}</strong>
            </td>
            <td class="d-none d-sm-table-cell"></td>
            <td class="text-center">
              <strong>{{ total }}</strong>
            </td>
          </tr>
          <tr *ngIf="!summary">
            <td colspan="4" class="text-center">
              <span
                class="spinner-border spinner-border-lg align-center"
              ></span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div *ngIf="detail">
  <transactions-detail [bankAccounts]="bankAccounts"></transactions-detail>
</div>
