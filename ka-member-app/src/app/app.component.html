<!-- nav -->
@if (user) {
  <div>
    <!--Could not put the ngIf on the Nav div's directly because it was causing errors-->
    <div
      ngbNav
      #nav="ngbNav"
      class="navbar navbar-expand-lg navbar-dark bg-dark"
      [(activeId)]="active"
    >
      <div class="d-flex flex-grow-1">
        <span class="w-100 d-lg-none d-block"> </span>
        <div class="navbar-header">
          <a class="navbar-brand" href="/">KA Member Database</a>
        </div>
        <div class="w-100 text-right">
          <!--
          Responsive Navbar in ng-bootstrap
          Makes use of a component property (isMenuCollapsed) that must be added manually
          See https://ng-bootstrap.github.io/#/components/collapse/examples
          for information on how to create a responsive Navbar in ng-bootstrap -->
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#myNavbar7"
            (click)="isMenuCollapsed = !isMenuCollapsed"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </div>
      <!-- This NavBar from https://www.codeply.com/go/qhaBrcWp3v -->
      <div
        class="collapse navbar-collapse flex-grow-1 text-right"
        id="myNavbar7"
        [ngbCollapse]="isMenuCollapsed"
      >
        <ul class="navbar-nav ml-auto flex-nowrap">
          <li [ngbNavItem]="1">
            <a class="nav-item nav-link" routerLink="/">Home</a>
          </li>
          <li [ngbNavItem]="4">
            <a class="nav-item nav-link" routerLink="/members">Members</a>
          </li>
          <li [ngbNavItem]="2">
            <a class="nav-item nav-link" routerLink="/reports">Reports</a>
          </li>
          @if (user.isAdmin) {
            <li [ngbNavItem]="3">
              <a class="nav-item nav-link" routerLink="/users">Users</a>
            </li>
          }
          <li [ngbNavItem]="5" ngbDropdown class="nav-item">
            <a href (click)="(false)" class="nav-link" ngbDropdownToggle>
              <!-- Find icon names at https://fontawesome.com/icons?d=gallery&p=2  -->
              <span class="fas fa-user"></span> Account
            </a>
            <div ngbDropdownMenu>
              <button ngbDropdownItem [routerLink]="'/users/edit/' + user.id">
                Profile
              </button>
              <div class="dropdown-divider"></div>
              <button ngbDropdownItem (click)="logout()">Logout</button>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div [ngbNavOutlet]="nav" class="mt-2"></div>
  </div>
}

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>

<!-- main app container -->
<div class="container">
  <alert></alert>
  <router-outlet></router-outlet>
</div>

<!-- credits -->
<div class="text-center mt-4">
  <p>
    <a href="/" target="_top">Knightsbridge Association Member Database</a>
  </p>
  <p>
    <a href="https://www.knightsbridgeassociation.com" target="_top"
      >(c) 2022 KnightsbridgeAssociation.com</a
    >
  </p>
</div>
